# ğŸ§® TypeScript Calculator Compiler

ä¸€ä¸ªåŸºäº EBNF è¯­æ³•çš„ TypeScript è®¡ç®—å™¨ç¼–è¯‘å™¨ï¼Œæ”¯æŒè¡¨è¾¾å¼è§£æã€AST æ„å»ºå’Œæ±‡ç¼–ä»£ç ç”Ÿæˆã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™ä¸ªé¡¹ç›®å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç¼–è¯‘å™¨å‰ç«¯ï¼ŒåŒ…æ‹¬ï¼š
- **è¯æ³•åˆ†æå™¨ï¼ˆLexerï¼‰**ï¼šå°†è¾“å…¥å­—ç¬¦ä¸²è½¬æ¢ä¸º Token åºåˆ—
- **è¯­æ³•åˆ†æå™¨ï¼ˆParserï¼‰**ï¼šåŸºäº EBNF è¯­æ³•çš„é€’å½’ä¸‹é™è§£æå™¨
- **AST æ„å»º**ï¼šæ„å»ºæŠ½è±¡è¯­æ³•æ ‘
- **ä»£ç ç”Ÿæˆ**ï¼šç”Ÿæˆæ±‡ç¼–ä»£ç 
- **è¡¨è¾¾å¼æ±‚å€¼**ï¼šç›´æ¥è®¡ç®—è¡¨è¾¾å¼ç»“æœ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Bun è¿è¡Œæ—¶

### å®‰è£…ä¾èµ–
```bash
bun install
```

### è¿è¡Œç¨‹åº
```bash
# BNFæ–¹æ³•ï¼ˆé€’å½’ä¸‹é™ï¼‰
bun run bnf:integrated          # BNFé›†æˆç‰ˆæœ¬ï¼ˆè§£æ+æ±‚å€¼ï¼‰
bun run bnf:separated           # BNFåˆ†ç¦»ç‰ˆæœ¬ï¼ˆè§£æ+AST+ä»£ç ç”Ÿæˆï¼‰

# ä¼˜å…ˆçº§çˆ¬å‡æ–¹æ³•
bun run precedence:integrated    # ä¼˜å…ˆçº§çˆ¬å‡é›†æˆç‰ˆæœ¬ï¼ˆè§£æ+æ±‚å€¼ï¼‰
bun run precedence:separated     # ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬ï¼ˆè§£æ+AST+ä»£ç ç”Ÿæˆï¼‰
bun run precedence:stack         # ğŸ¯ æ ˆå¼å®ç°ï¼ˆéªŒè¯å•è°ƒæ ˆç†è§£ï¼‰

# ğŸŒ å‰ç«¯å¯è§†åŒ–åº”ç”¨
cd frontend && bun run dev       # å¯åŠ¨å‰ç«¯å¯è§†åŒ–åº”ç”¨
# è®¿é—® http://localhost:5173 ä½“éªŒäº¤äº’å¼å¯è§†åŒ–

# è¿è¡Œæµ‹è¯•
bun run test:all                # è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆåŒ…å«æ‰€æœ‰ç‰ˆæœ¬ï¼‰
bun run test:basic              # åŸºæœ¬è¡¨è¾¾å¼æµ‹è¯•
bun run test:edge               # è¾¹ç•Œæƒ…å†µæµ‹è¯•
bun run test:precedence         # è¿ç®—ç¬¦ä¼˜å…ˆçº§æµ‹è¯•
bun run test:performance        # æ€§èƒ½æµ‹è¯•

# ç‰¹å®šç‰ˆæœ¬æµ‹è¯•
bun run test:bnf-integrated     # æµ‹è¯•BNFé›†æˆç‰ˆæœ¬
bun run test:bnf-separated      # æµ‹è¯•BNFåˆ†ç¦»ç‰ˆæœ¬
bun run test:precedence-integrated   # æµ‹è¯•ä¼˜å…ˆçº§çˆ¬å‡é›†æˆç‰ˆæœ¬
bun run test:precedence-separated    # æµ‹è¯•ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
bnf/
â”œâ”€â”€ bnf/                                  # BNFæ–¹æ³•ï¼ˆé€’å½’ä¸‹é™ï¼‰æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ index.ts                          # BNFé›†æˆç‰ˆæœ¬ï¼ˆè§£æ+æ±‚å€¼ï¼‰
â”‚   â””â”€â”€ separated.ts                      # BNFåˆ†ç¦»ç‰ˆæœ¬ï¼ˆè§£æ+AST+ä»£ç ç”Ÿæˆï¼‰
â”œâ”€â”€ precedence-climbing/                  # ä¼˜å…ˆçº§çˆ¬å‡æ–¹æ³•æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ index.ts                          # ä¼˜å…ˆçº§çˆ¬å‡é›†æˆç‰ˆæœ¬ï¼ˆè§£æ+æ±‚å€¼ï¼‰
â”‚   â”œâ”€â”€ separated.ts                      # ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬ï¼ˆè§£æ+AST+ä»£ç ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ stack-based-precedence.ts         # ğŸ¯ æ ˆå¼å®ç°ï¼ˆéªŒè¯å•è°ƒæ ˆç†è§£ï¼‰
â”œâ”€â”€ test/                                 # æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ basic-expressions.txt             # åŸºæœ¬è¡¨è¾¾å¼æµ‹è¯•
â”‚   â”œâ”€â”€ edge-cases.txt                    # è¾¹ç•Œæƒ…å†µæµ‹è¯•
â”‚   â”œâ”€â”€ operator-precedence.txt           # è¿ç®—ç¬¦ä¼˜å…ˆçº§æµ‹è¯•
â”‚   â”œâ”€â”€ performance.txt                   # æ€§èƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ error-cases.txt                   # é”™è¯¯æƒ…å†µæµ‹è¯•
â”‚   â””â”€â”€ README.md                         # æµ‹è¯•è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ docs/                                 # æ–‡æ¡£æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ expression-analysis.md            # è¡¨è¾¾å¼æ‰§è¡Œæµç¨‹åˆ†æ
â”‚   â”œâ”€â”€ operator-associativity.md         # è¿ç®—ç¬¦ç»“åˆæ€§åˆ†æ
â”‚   â”œâ”€â”€ precedence-climbing-analysis.md # ä¼˜å…ˆçº§çˆ¬å‡ç®—æ³•åˆ†æ
â”‚   â””â”€â”€ precedence-climbing-stack-analysis.md # ğŸ¯ æ ˆå¼åˆ†ææ–‡æ¡£
â”œâ”€â”€ runner.ts                             # æµ‹è¯•è¿è¡Œå™¨
â”œâ”€â”€ package.json                          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                         # TypeScript é…ç½®
â””â”€â”€ README.md                             # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. æ”¯æŒçš„è¿ç®—ç¬¦
- **ç®—æœ¯è¿ç®—**ï¼š`+`, `-`, `*`, `/`
- **æŒ‡æ•°è¿ç®—**ï¼š`**`ï¼ˆå³ç»“åˆï¼‰
- **æ‹¬å·**ï¼š`()`
- **è´Ÿæ•°**ï¼š`-123`

### 2. è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰
1. **æ‹¬å·å’Œè´Ÿæ•°**ï¼š`()`, `-123`
2. **æŒ‡æ•°è¿ç®—**ï¼š`**`ï¼ˆå³ç»“åˆï¼‰
3. **ä¹˜é™¤è¿ç®—**ï¼š`*`, `/`ï¼ˆå·¦ç»“åˆï¼‰
4. **åŠ å‡è¿ç®—**ï¼š`+`, `-`ï¼ˆå·¦ç»“åˆï¼‰

### 3. è¯­æ³•è§„åˆ™ï¼ˆEBNFï¼‰
```
<Expr> ::= <AddSubExpr>
<AddSubExpr> ::= <MulDivExpr> {('+'|'-') <MulDivExpr>}
<MulDivExpr> ::= <PowerExpr> {('*'|'/') <PowerExpr>}
<PowerExpr> ::= <PrimaryExpr> {'**' <PrimaryExpr>}
<PrimaryExpr> ::= NUM | '-'NUM | '('<Expr>')'
```

## ğŸ”§ äº”ç§å®ç°æ–¹å¼å¯¹æ¯”

### 1. BNFé›†æˆç‰ˆæœ¬ï¼ˆ`bnf/index.ts`ï¼‰
- **ç‰¹ç‚¹**ï¼šé€’å½’ä¸‹é™è§£æ + ç›´æ¥æ±‚å€¼
- **ä¼˜ç‚¹**ï¼šä»£ç ç®€æ´ï¼Œé€‚åˆè§£é‡Šå™¨
- **ç¼ºç‚¹**ï¼šæ— æ³•ç”Ÿæˆä¸­é—´ä»£ç 

```typescript
// ç¤ºä¾‹ï¼š1+2*3
function evalExpr(): number {
    return evalAddSubExpr();
}
```

### 2. BNFåˆ†ç¦»ç‰ˆæœ¬ï¼ˆ`bnf/separated.ts`ï¼‰
- **ç‰¹ç‚¹**ï¼šé€’å½’ä¸‹é™è§£æ + ASTæ„å»º + æ±‡ç¼–ä»£ç ç”Ÿæˆ
- **ä¼˜ç‚¹**ï¼šå¯æ‰©å±•ï¼Œæ”¯æŒä»£ç ç”Ÿæˆï¼Œç»“æ„æ¸…æ™°
- **ç¼ºç‚¹**ï¼šä»£ç å¤æ‚åº¦è¾ƒé«˜

```typescript
// ç¤ºä¾‹ï¼šç”Ÿæˆ AST å’Œæ±‡ç¼–ä»£ç 
const ast = parseExpr();
const assembly = generator.generate(ast);
```

### 3. ä¼˜å…ˆçº§çˆ¬å‡é›†æˆç‰ˆæœ¬ï¼ˆ`precedence-climbing/index.ts`ï¼‰
- **ç‰¹ç‚¹**ï¼šwhileå¾ªç¯æ–¹å¼ï¼Œç›´æ¥æ±‚å€¼
- **ä¼˜ç‚¹**ï¼šé¿å…é€’å½’æ·±åº¦é™åˆ¶ï¼Œç®—æ³•ç´§å‡‘
- **ç¼ºç‚¹**ï¼šæ— æ³•ç”Ÿæˆä¸­é—´ä»£ç 

```typescript
// ç¤ºä¾‹ï¼šwhileå¾ªç¯å¤„ç†æ‰€æœ‰ä¼˜å…ˆçº§
function parseExpression(minPrecedence: Precedence): number {
    let left = parsePrimary();
    while (true) {
        const precedence = getPrecedence(token);
        if (precedence < minPrecedence) break;
        // å¤„ç†æ“ä½œç¬¦...
    }
}
```

### 4. ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬ï¼ˆ`precedence-climbing/separated.ts`ï¼‰
- **ç‰¹ç‚¹**ï¼šwhileå¾ªç¯æ–¹å¼ + ASTæ„å»º + æ±‡ç¼–ä»£ç ç”Ÿæˆ
- **ä¼˜ç‚¹**ï¼šç»“åˆäº†ä¼˜å…ˆçº§çˆ¬å‡çš„æ•ˆç‡å’Œåˆ†ç¦»å¼çš„æ‰©å±•æ€§
- **ç¼ºç‚¹**ï¼šç®—æ³•ç†è§£éš¾åº¦è¾ƒé«˜

### 5. ğŸ¯ **æ ˆå¼å®ç°ç‰ˆæœ¬**ï¼ˆ`precedence-climbing/stack-based-precedence.ts`ï¼‰
- **ç‰¹ç‚¹**ï¼šæ˜¾å¼å•è°ƒæ ˆ + æ“ä½œæ•°æ ˆï¼Œç›´æ¥æ±‚å€¼
- **ä¼˜ç‚¹**ï¼šç›´è§‚å±•ç¤ºç®—æ³•æœ¬è´¨ï¼ŒéªŒè¯å•è°ƒæ ˆç†è§£
- **ç¼ºç‚¹**ï¼šä»£ç é‡è¾ƒå¤§ï¼Œä¸»è¦ç”¨äºæ•™å­¦

```typescript
// ç¤ºä¾‹ï¼šæ˜¾å¼æ ˆæ“ä½œ
class StackBasedParser {
    private operatorStack: Token[] = [];  // å•è°ƒé€’å¢æ ˆ
    private operandStack: number[] = []; // æ“ä½œæ•°æ ˆ
    
    private processOperator(currentToken: Token): void {
        // å•è°ƒæ ˆå¤„ç†é€»è¾‘...
    }
}
```

| å®ç°æ–¹å¼ | è§£æç®—æ³• | è¾“å‡ºç±»å‹ | ä»£ç ç”Ÿæˆ | é€’å½’æ·±åº¦ | æ•™å­¦ä»·å€¼ |
|----------|----------|----------|----------|----------|----------|
| BNFé›†æˆç‰ˆæœ¬ | é€’å½’ä¸‹é™ | ç›´æ¥æ±‚å€¼ | âŒ | æœ‰é™åˆ¶ | â­â­â­ |
| BNFåˆ†ç¦»ç‰ˆæœ¬ | é€’å½’ä¸‹é™ | AST | âœ… | æœ‰é™åˆ¶ | â­â­â­â­ |
| ä¼˜å…ˆçº§çˆ¬å‡é›†æˆç‰ˆæœ¬ | whileå¾ªç¯ | ç›´æ¥æ±‚å€¼ | âŒ | æ— é™åˆ¶ | â­â­â­â­ |
| ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬ | whileå¾ªç¯ | AST | âœ… | æ— é™åˆ¶ | â­â­â­â­â­ |
| **æ ˆå¼å®ç°ç‰ˆæœ¬** | **æ˜¾å¼æ ˆ** | **ç›´æ¥æ±‚å€¼** | **âŒ** | **æ— é™åˆ¶** | **ğŸ¯â­â­â­â­â­** |

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬è¿ç®—
```bash
$ echo "1+2*3" | bun run bnf:integrated
7

$ echo "2**3**2" | bun run precedence:integrated
512

$ echo "(1+2)*3" | bun run bnf:separated
9

$ echo "2+3**4**2-5*6" | bun run precedence:stack
43046693
```

### BNFåˆ†ç¦»ç‰ˆæœ¬ï¼ˆé€’å½’ä¸‹é™ï¼‰
```bash
$ echo "1+2*3" | bun run bnf:separated

=== ASTç»“æ„ ===
{
  "type": "BinaryOp",
  "operator": "+",
  "left": {"type": "Number", "value": 1},
  "right": {
    "type": "BinaryOp",
    "operator": "*",
    "left": {"type": "Number", "value": 2},
    "right": {"type": "Number", "value": 3}
  }
}

=== è®¡ç®—ç»“æœ ===
7

=== ç”Ÿæˆçš„æ±‡ç¼–ä»£ç  ===
mov eax, 1
mov t0, eax
mov eax, 2
mov t1, eax
mov eax, 3
mov ebx, t1
imul eax, ebx
mov ebx, t0
add eax, ebx
ret
```

### ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬ï¼ˆwhileå¾ªç¯æ–¹å¼ï¼‰
```bash
$ echo "1+2*3" | bun run precedence:separated

=== ASTç»“æ„ ===
{
  "type": "BinaryOp",
  "operator": "+",
  "left": {"type": "Number", "value": 1},
  "right": {
    "type": "BinaryOp",
    "operator": "*",
    "left": {"type": "Number", "value": 2},
    "right": {"type": "Number", "value": 3}
  }
}

=== è®¡ç®—ç»“æœ ===
7

=== ç”Ÿæˆçš„æ±‡ç¼–ä»£ç  ===
mov eax, 1
mov t0, eax
mov eax, 2
mov t1, eax
mov eax, 3
mov ebx, t1
imul eax, ebx
mov ebx, t0
add eax, ebx
ret
```

**æ³¨æ„**ï¼šä¸¤ç§è§£æå™¨ç”Ÿæˆçš„ASTå’Œæ±‡ç¼–ä»£ç å®Œå…¨ç›¸åŒï¼Œè¯æ˜äº†ä¸åŒè§£æç®—æ³•å¯ä»¥äº§ç”Ÿç›¸åŒçš„ç»“æœï¼

### ğŸ¯ æ ˆå¼å®ç°ç‰ˆæœ¬ï¼ˆå•è°ƒæ ˆéªŒè¯ï¼‰
```bash
$ echo "2+3**4**2-5*6" | bun run precedence:stack

=== æµ‹è¯•è¡¨è¾¾å¼: 2 + 3 ** 4 ** 2 - 5 * 6 ===
å¼€å§‹è§£æè¡¨è¾¾å¼...
Tokenåºåˆ—: [2, ADD, 3, POWER, 4, POWER, 2, SUB, 5, MUL, 6, END]

æ“ä½œæ•° 2 å…¥æ ˆ
æ“ä½œæ•°æ ˆ: [2]

å¤„ç†æ“ä½œç¬¦: ADD
æ“ä½œç¬¦ ADD å…¥æ ˆ
æ“ä½œç¬¦æ ˆ: [ADD]

æ“ä½œæ•° 3 å…¥æ ˆ
æ“ä½œæ•°æ ˆ: [2, 3]

å¤„ç†æ“ä½œç¬¦: POWER
æ¯”è¾ƒ: æ ˆé¡¶æ“ä½œç¬¦ ADD ä¼˜å…ˆçº§=2, å½“å‰æ“ä½œç¬¦ POWER ä¼˜å…ˆçº§=3
æ“ä½œç¬¦ POWER å…¥æ ˆ
æ“ä½œç¬¦æ ˆ: [ADD, POWER]

æ“ä½œæ•° 4 å…¥æ ˆ
æ“ä½œæ•°æ ˆ: [2, 3, 4]

å¤„ç†æ“ä½œç¬¦: POWER
æ¯”è¾ƒ: æ ˆé¡¶æ“ä½œç¬¦ POWER ä¼˜å…ˆçº§=3, å½“å‰æ“ä½œç¬¦ POWER ä¼˜å…ˆçº§=3
æ“ä½œç¬¦ POWER å…¥æ ˆ
æ“ä½œç¬¦æ ˆ: [ADD, POWER, POWER]

æ“ä½œæ•° 2 å…¥æ ˆ
æ“ä½œæ•°æ ˆ: [2, 3, 4, 2]

å¤„ç†æ“ä½œç¬¦: SUB
æ¯”è¾ƒ: æ ˆé¡¶æ“ä½œç¬¦ POWER ä¼˜å…ˆçº§=3, å½“å‰æ“ä½œç¬¦ SUB ä¼˜å…ˆçº§=1
æ‰§è¡Œ 4 POWER 2 = 16
æ“ä½œæ•°æ ˆ: [2, 3, 16]
æ¯”è¾ƒ: æ ˆé¡¶æ“ä½œç¬¦ POWER ä¼˜å…ˆçº§=3, å½“å‰æ“ä½œç¬¦ SUB ä¼˜å…ˆçº§=1
æ‰§è¡Œ 3 POWER 16 = 43046721
æ“ä½œæ•°æ ˆ: [2, 43046721]
æ¯”è¾ƒ: æ ˆé¡¶æ“ä½œç¬¦ ADD ä¼˜å…ˆçº§=2, å½“å‰æ“ä½œç¬¦ SUB ä¼˜å…ˆçº§=1
æ‰§è¡Œ 2 ADD 43046721 = 43046723
æ“ä½œæ•°æ ˆ: [43046723]
æ“ä½œç¬¦ SUB å…¥æ ˆ
æ“ä½œç¬¦æ ˆ: [SUB]

æ“ä½œæ•° 5 å…¥æ ˆ
æ“ä½œæ•°æ ˆ: [43046723, 5]

å¤„ç†æ“ä½œç¬¦: MUL
æ¯”è¾ƒ: æ ˆé¡¶æ“ä½œç¬¦ SUB ä¼˜å…ˆçº§=2, å½“å‰æ“ä½œç¬¦ MUL ä¼˜å…ˆçº§=2
æ“ä½œç¬¦ MUL å…¥æ ˆ
æ“ä½œç¬¦æ ˆ: [SUB, MUL]

æ“ä½œæ•° 6 å…¥æ ˆ
æ“ä½œæ•°æ ˆ: [43046723, 5, 6]

è¡¨è¾¾å¼ç»“æŸï¼Œå¤„ç†å‰©ä½™æ“ä½œç¬¦...
æ‰§è¡Œ 5 MUL 6 = 30
æ“ä½œæ•°æ ˆ: [43046723, 30]
æ‰§è¡Œ 43046723 SUB 30 = 43046693
æ“ä½œæ•°æ ˆ: [43046693]

ç»“æœ: 43046693
```

**ğŸ¯ å…³é”®è§‚å¯Ÿ**ï¼š
- **å•è°ƒæ ˆç‰¹æ€§**ï¼šæ“ä½œç¬¦æ ˆå§‹ç»ˆä¿æŒä¼˜å…ˆçº§å•è°ƒé€’å¢
- **å³ç»“åˆå¤„ç†**ï¼š`3 ** 4 ** 2` æ­£ç¡®è§£æä¸º `3 ** (4 ** 2)`
- **å·¦ç»“åˆå¤„ç†**ï¼š`2 + 3 ** 4 ** 2 - 5 * 6` æ­£ç¡®è§£æä¸º `(2 + 3 ** 4 ** 2) - (5 * 6)`
- **æ ˆæ“ä½œç›´è§‚**ï¼šæ¯ä¸€æ­¥æ ˆçŠ¶æ€å˜åŒ–éƒ½æ¸…æ™°å¯è§

## ğŸŒ å‰ç«¯å¯è§†åŒ–åº”ç”¨

### å¯åŠ¨åº”ç”¨
```bash
cd frontend && bun run dev
# è®¿é—® http://localhost:5173
```

### åŠŸèƒ½ç‰¹æ€§

#### ğŸ¯ åŒæ¨¡å¼å¯è§†åŒ–
- **ASTæ ‘æ¨¡å¼**ï¼šä¼ ç»Ÿçš„æŠ½è±¡è¯­æ³•æ ‘å¯è§†åŒ–
- **æ ˆå¼æ¨¡å¼**ï¼šå•è°ƒæ ˆ + æ“ä½œæ•°æ ˆçš„å¯è§†åŒ–

#### ğŸ”„ äº¤äº’å¼æ“ä½œ
- **é¢„ç½®è¡¨è¾¾å¼**ï¼šå¿«é€Ÿé€‰æ‹©æµ‹è¯•ç”¨ä¾‹
- **ç¼–è¯‘**ï¼šç”Ÿæˆè§£ææ­¥éª¤
- **æŒ‰æ­¥æ‰§è¡Œ**ï¼šé€æ­¥æŸ¥çœ‹è§£æè¿‡ç¨‹
- **ä¸€é”®å®Œæˆ**ï¼šè‡ªåŠ¨æ’­æ”¾æ‰€æœ‰æ­¥éª¤
- **é‡ç½®**ï¼šæ¸…ç©ºå½“å‰çŠ¶æ€

#### ğŸ“Š æ ˆå¼å¯è§†åŒ–ç‰¹è‰²
- **æ“ä½œç¬¦æ ˆ**ï¼šå•è°ƒé€’å¢æ ˆï¼Œæ˜¾ç¤ºä¼˜å…ˆçº§å’Œç»“åˆæ€§
- **æ“ä½œæ•°æ ˆ**ï¼šå­˜å‚¨æ“ä½œæ•°å’Œä¸­é—´ç»“æœ
- **å®æ—¶æ›´æ–°**ï¼šæ¯æ­¥æ“ä½œéƒ½æœ‰è¯¦ç»†çš„æ ˆçŠ¶æ€å˜åŒ–
- **é¢œè‰²ç¼–ç **ï¼šä¸åŒæ“ä½œç¬¦ç”¨ä¸åŒé¢œè‰²åŒºåˆ†
- **ç®—æ³•è¯´æ˜**ï¼šå†…ç½®æ ¸å¿ƒç®—æ³•ç†è§£è¯´æ˜

#### ğŸ¯ æ¨èæµ‹è¯•ç”¨ä¾‹
- `2+3*4` - åŸºç¡€ä¼˜å…ˆçº§æµ‹è¯•
- `2**3**2` - å³ç»“åˆæµ‹è¯•
- `2+3**4**2-5*6` - å¤æ‚æ··åˆæµ‹è¯•ï¼ˆæ ˆå¼éªŒè¯ä¸“ç”¨ï¼‰

### æŠ€æœ¯æ ˆ
- **React 18** + **TypeScript**
- **Tailwind CSS** - æ ·å¼æ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·
- **Bun** - è¿è¡Œæ—¶å’ŒåŒ…ç®¡ç†å™¨

## ğŸ§ª æµ‹è¯•æ¡†æ¶

### è‡ªåŠ¨åŒ–æµ‹è¯•
é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æµ‹è¯•å’Œç»“æœéªŒè¯ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰- åŒ…å«æ‰€æœ‰å››ä¸ªç‰ˆæœ¬
bun run test:all

# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
bun run test:basic              # åŸºæœ¬è¡¨è¾¾å¼ï¼ˆ20ä¸ªæµ‹è¯•ï¼‰
bun run test:edge               # è¾¹ç•Œæƒ…å†µï¼ˆ22ä¸ªæµ‹è¯•ï¼‰
bun run test:precedence         # è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼ˆ17ä¸ªæµ‹è¯•ï¼‰
bun run test:performance        # æ€§èƒ½æµ‹è¯•ï¼ˆ16ä¸ªæµ‹è¯•ï¼‰

# è¿è¡Œç‰¹å®šç‰ˆæœ¬æµ‹è¯•
bun run test:bnf-integrated     # BNFé›†æˆç‰ˆæœ¬æµ‹è¯•
bun run test:bnf-separated      # BNFåˆ†ç¦»ç‰ˆæœ¬æµ‹è¯•
bun run test:precedence-integrated   # ä¼˜å…ˆçº§çˆ¬å‡é›†æˆç‰ˆæœ¬æµ‹è¯•
bun run test:precedence-separated    # ä¼˜å…ˆçº§çˆ¬å‡åˆ†ç¦»ç‰ˆæœ¬æµ‹è¯•
```

### æµ‹è¯•ç»“æœç¤ºä¾‹
```
ğŸ“Š æµ‹è¯•æ€»ç»“:
   æ€»æµ‹è¯•æ•°: 75
   é€šè¿‡: 73 âœ…
   å¤±è´¥: 2 âŒ
   æˆåŠŸç‡: 97.3%
```

### æµ‹è¯•è¦†ç›–èŒƒå›´
- **åŸºæœ¬è¡¨è¾¾å¼**: 100% é€šè¿‡ - æ‰€æœ‰æ•´æ•°è¿ç®—éƒ½æ­£ç¡®
- **è¿ç®—ç¬¦ä¼˜å…ˆçº§**: 100% é€šè¿‡ - ä¼˜å…ˆçº§å’Œç»“åˆæ€§éƒ½æ­£ç¡®  
- **æ€§èƒ½æµ‹è¯•**: 93.8% é€šè¿‡ - æ·±åº¦åµŒå¥—å’Œé•¿è¡¨è¾¾å¼å¤„ç†è‰¯å¥½
- **è¾¹ç•Œæƒ…å†µ**: 95.5% é€šè¿‡ - åŒ…å«é¢„æœŸçš„è®¾è®¡é™åˆ¶ï¼ˆé™¤é›¶ç­‰ï¼‰

### é¢„æœŸå¤±è´¥è¯´æ˜
- **é™¤é›¶é”™è¯¯**: æ­£ç¡®é”™è¯¯å¤„ç†ï¼Œè§£æå™¨æ­£ç¡®æ£€æµ‹å¼‚å¸¸
- **è¶…å¤§æ•°è¿ç®—**: æ•°å€¼æº¢å‡ºï¼Œç¬¦åˆJavaScriptæ•°å€¼èŒƒå›´é™åˆ¶

## ğŸ§  æ ¸å¿ƒç®—æ³•

### 1. é€’å½’ä¸‹é™è§£æ
```typescript
function evalAddSubExpr(): number {
    let result = evalMulDivExpr();
    while (token === TokenType.ADD || token === TokenType.SUB) {
        const op = token;
        getToken();
        const right = evalMulDivExpr();
        result = op === TokenType.ADD ? result + right : result - right;
    }
    return result;
}
```

### 2. ä¼˜å…ˆçº§çˆ¬å‡è§£æï¼ˆwhileå¾ªç¯æ–¹å¼ï¼‰
```typescript
function parseExpression(minPrecedence: Precedence = Precedence.NONE): ASTNode {
    let left = parsePrimary();
    
    while (true) {
        const currentToken = token;
        const precedence = getPrecedence(currentToken);
        
        if (precedence < minPrecedence || precedence === Precedence.NONE) {
            break;
        }
        
        getToken(); // æ¶ˆè´¹æ“ä½œç¬¦
        
        const rightMinPrecedence = precedence + (isRightAssociative(currentToken) ? 0 : 1);
        const right = parseExpression(rightMinPrecedence);
        
        left = createBinaryNode(currentToken, left, right);
    }
    
    return left;
}
```

### 3. è¿ç®—ç¬¦ç»“åˆæ€§å¤„ç†
- **å·¦ç»“åˆ**ï¼š`rightMinPrecedence = precedence + 1`ï¼Œç¡®ä¿å³æ“ä½œæ•°ç”¨æ›´é«˜ä¼˜å…ˆçº§è§£æ
- **å³ç»“åˆ**ï¼š`rightMinPrecedence = precedence + 0`ï¼Œå…è®¸å³æ“ä½œæ•°ç”¨ç›¸åŒä¼˜å…ˆçº§è§£æ

```typescript
function isRightAssociative(token: TokenType): boolean {
    return token === TokenType.POWER;  // åªæœ‰ ** æ˜¯å³ç»“åˆ
}
```

### 4. ç®—æ³•å¯¹æ¯”
| ç‰¹æ€§ | é€’å½’ä¸‹é™ | ä¼˜å…ˆçº§çˆ¬å‡ |
|------|----------|------------|
| **æ§åˆ¶ç»“æ„** | å¤šä¸ªé€’å½’å‡½æ•° | å•ä¸€whileå¾ªç¯ |
| **ä¼˜å…ˆçº§å¤„ç†** | å‡½æ•°è°ƒç”¨å±‚æ¬¡ | ä¼˜å…ˆçº§è¡¨+å‚æ•° |
| **ä»£ç å¤æ‚åº¦** | ç®€å•ç›´è§‚ | æ›´ç´§å‡‘é«˜æ•ˆ |
| **é€’å½’æ·±åº¦** | æœ‰é™åˆ¶ | æ— é™åˆ¶ |
| **æ‰©å±•æ€§** | éœ€ä¿®æ”¹å¤šä¸ªå‡½æ•° | åªéœ€ä¿®æ”¹ä¼˜å…ˆçº§è¡¨ |

### 5. ğŸ¯ **ä¼˜å…ˆçº§çˆ¬å¡ç®—æ³•çš„æ•°æ®ç»“æ„æœ¬è´¨**ï¼ˆæ ¸å¿ƒç†è§£ï¼‰

#### **ğŸ’¡ å…³é”®æ´å¯Ÿï¼šå•è°ƒæ ˆ + æ“ä½œæ•°æ ˆ**

ä¼˜å…ˆçº§çˆ¬å¡ç®—æ³•æœ¬è´¨ä¸Šå°±æ˜¯è¿™æ ·çš„æ•°æ®ç»“æ„ï¼š

```
æ“ä½œç¬¦æ ˆï¼ˆå•è°ƒé€’å¢æ ˆï¼‰    æ“ä½œæ•°æ ˆï¼ˆæ™®é€šæ ˆï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ“ä½œç¬¦     â”‚          â”‚  æ“ä½œæ•°     â”‚
â”‚  (ä¼˜å…ˆçº§)   â”‚          â”‚  (ä¸­é—´ç»“æœ) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **ğŸ”‘ æ ¸å¿ƒç®—æ³•æµç¨‹**

1. **æ“ä½œæ•°å¤„ç†**ï¼šé‡åˆ°æ“ä½œæ•°ç›´æ¥å…¥æ“ä½œæ•°æ ˆ
2. **æ“ä½œç¬¦æ¯”è¾ƒ**ï¼šæ–°æ“ä½œç¬¦ä¸æ ˆé¡¶æ“ä½œç¬¦æ¯”è¾ƒä¼˜å…ˆçº§
3. **ä¼˜å…ˆçº§åˆ¤æ–­**ï¼š
   - å¦‚æœæ–°æ“ä½œç¬¦ä¼˜å…ˆçº§ < æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§ â†’ å‡ºæ ˆå¹¶è®¡ç®—
   - å¦‚æœæ–°æ“ä½œç¬¦ä¼˜å…ˆçº§ â‰¥ æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§ â†’ å…¥æ ˆ
4. **ç»“åˆæ€§å¤„ç†**ï¼š
   - **å·¦ç»“åˆæ“ä½œç¬¦**ï¼šä¼˜å…ˆçº§ +1
   - **å³ç»“åˆæ“ä½œç¬¦**ï¼šä¼˜å…ˆçº§ä¸å˜

#### **ğŸ“Š å¤æ‚ä¾‹å­éªŒè¯ï¼š`2 + 3 ** 4 ** 2 - 5 * 6`**

è¿™ä¸ªä¾‹å­å®Œç¾å±•ç¤ºäº†å•è°ƒæ ˆçš„å·¥ä½œåŸç†ï¼š

```
Tokenåºåˆ—: [2, ADD, 3, POWER, 4, POWER, 2, SUB, 5, MUL, 6, END]

å…³é”®æ­¥éª¤åˆ†æï¼š
1. 2 + 3 ** 4 ** 2 - 5 * 6
   â†“
2. å¤„ç†å³ç»“åˆï¼š3 ** 4 ** 2 â†’ 3 ** (4 ** 2) = 3 ** 16 = 43046721
   â†“  
3. å¤„ç†å·¦ç»“åˆï¼š2 + 43046721 - 5 * 6 â†’ (2 + 43046721) - (5 * 6)
   â†“
4. æœ€ç»ˆç»“æœï¼š43046693
```

**ğŸ¯ å…³é”®éªŒè¯ç‚¹**ï¼š
- **å³ç»“åˆ**ï¼š`3 ** 4 ** 2` æ­£ç¡®è§£æä¸º `3 ** (4 ** 2)`
- **å·¦ç»“åˆ**ï¼š`2 + 3 ** 4 ** 2 - 5 * 6` æ­£ç¡®è§£æä¸º `(2 + 3 ** 4 ** 2) - (5 * 6)`
- **ä¼˜å…ˆçº§å±‚æ¬¡**ï¼š`**` (ä¼˜å…ˆçº§3) > `*` (ä¼˜å…ˆçº§2) > `+`/`-` (ä¼˜å…ˆçº§1)

#### **âš¡ æ ˆå¼å®ç° vs é€’å½’å®ç°**

**æ ˆå¼å®ç°**ï¼ˆæ˜¾å¼æ ˆï¼‰ï¼š
```typescript
class StackBasedParser {
    private operatorStack: Token[] = [];  // å•è°ƒé€’å¢æ ˆ
    private operandStack: number[] = []; // æ“ä½œæ•°æ ˆ
    
    private processOperator(currentToken: Token): void {
        while (this.operatorStack.length > 0) {
            const topOperator = this.operatorStack[this.operatorStack.length - 1];
            
            // å…³é”®ï¼šå·¦ç»“åˆæ“ä½œç¬¦ä¼˜å…ˆçº§+1
            const topPrecedence = topOperator.precedence + 
                (topOperator.isRightAssociative ? 0 : 1);
            const currentPrecedence = currentToken.precedence;
            
            if (topPrecedence > currentPrecedence) {
                this.executeTopOperator(); // å‡ºæ ˆå¹¶è®¡ç®—
            } else {
                break; // å…¥æ ˆ
            }
        }
        
        this.operatorStack.push(currentToken); // æ–°æ“ä½œç¬¦å…¥æ ˆ
    }
}
```

**é€’å½’å®ç°**ï¼ˆéšå¼è°ƒç”¨æ ˆï¼‰ï¼š
```typescript
function parseExpression(minPrecedence: Precedence = Precedence.NONE): number {
    let left = parsePrimary();
    
    while (true) {
        const currentToken = token;
        const precedence = getPrecedence(currentToken);
        
        if (precedence < minPrecedence || precedence === Precedence.NONE) {
            break;
        }
        
        getToken(); // æ¶ˆè´¹æ“ä½œç¬¦
        
        // å…³é”®ï¼šå·¦ç»“åˆæ“ä½œç¬¦ä¼˜å…ˆçº§+1
        const rightMinPrecedence = precedence + 
            (isRightAssociative(currentToken) ? 0 : 1);
        const right = parseExpression(rightMinPrecedence);
        
        left = executeOperation(currentToken, left, right);
    }
    
    return left;
}
```

#### **ğŸ”„ ç­‰ä»·æ€§è¯æ˜**

ä¸¤ç§å®ç°åœ¨é€»è¾‘ä¸Šå®Œå…¨ç­‰ä»·ï¼š

| æ–¹é¢ | æ ˆå¼å®ç° | é€’å½’å®ç° |
|------|----------|----------|
| **æ“ä½œç¬¦æ ˆ** | æ˜¾å¼ `operatorStack` | éšå¼è°ƒç”¨æ ˆ |
| **æ“ä½œæ•°æ ˆ** | æ˜¾å¼ `operandStack` | éšå¼å±€éƒ¨å˜é‡ |
| **ä¼˜å…ˆçº§æ¯”è¾ƒ** | `topPrecedence > currentPrecedence` | `precedence < minPrecedence` |
| **ç»“åˆæ€§å¤„ç†** | `precedence + (isRightAssociative ? 0 : 1)` | `precedence + (isRightAssociative ? 0 : 1)` |

#### **ğŸ¯ æ ¸å¿ƒä»·å€¼**

è¿™ç§ç†è§£çš„ä»·å€¼åœ¨äºï¼š

1. **ç®—æ³•æœ¬è´¨**ï¼šå°†å¤æ‚çš„é€’å½’é€»è¾‘è½¬åŒ–ä¸ºç›´è§‚çš„æ ˆæ“ä½œ
2. **æ•°æ®ç»“æ„é©±åŠ¨**ï¼šå•è°ƒæ ˆ + æ“ä½œæ•°æ ˆ = ä¼˜å…ˆçº§çˆ¬å¡ç®—æ³•
3. **å®ç°é€‰æ‹©**ï¼šå¯ä»¥é€‰æ‹©é€’å½’ï¼ˆç®€æ´ï¼‰æˆ–æ ˆå¼ï¼ˆæ˜¾å¼ï¼‰å®ç°
4. **æ‰©å±•æ€§**ï¼šæ·»åŠ æ–°æ“ä½œç¬¦åªéœ€ä¿®æ”¹ä¼˜å…ˆçº§è¡¨

**ğŸ’¡ ç»“è®º**ï¼šä¼˜å…ˆçº§çˆ¬å¡ç®—æ³•æœ¬è´¨ä¸Šå°±æ˜¯**æ“ä½œç¬¦å•è°ƒé€’å¢æ ˆ + æ“ä½œæ•°æ ˆ**çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡ç»“åˆæ€§å¤„ç†ï¼ˆå·¦ç»“åˆ+1ï¼Œå³ç»“åˆä¸å˜ï¼‰æ¥æ­£ç¡®å¤„ç†å¤æ‚çš„è¡¨è¾¾å¼ã€‚

### 6. ä¼˜å…ˆçº§çˆ¬å‡ä¸é€†æ³¢å…°è¡¨è¾¾å¼çš„ç›¸ä¼¼æ€§

ä¼˜å…ˆçº§çˆ¬å‡è§£æå™¨ä¸é€†æ³¢å…°è¡¨è¾¾å¼ï¼ˆRPNï¼‰å¤„ç†åœ¨ç®—æ³•æ€æƒ³ä¸Šé«˜åº¦ç›¸ä¼¼ï¼š

#### **æ ¸å¿ƒæ€æƒ³ç›¸ä¼¼**
- **ä¼˜å…ˆçº§æ¯”è¾ƒæœºåˆ¶**: éƒ½é€šè¿‡ä¼˜å…ˆçº§è¡¨å†³å®šä½•æ—¶å¤„ç†æ“ä½œç¬¦
- **å»¶è¿Ÿå¤„ç†ç­–ç•¥**: é‡åˆ°æ›´é«˜ä¼˜å…ˆçº§æ—¶æ‰å¤„ç†å½“å‰æ“ä½œç¬¦
- **ç»“åˆæ€§å¤„ç†**: éƒ½æ­£ç¡®å¤„ç†å·¦ç»“åˆå’Œå³ç»“åˆæ“ä½œç¬¦

#### **ç®—æ³•æµç¨‹å¯¹æ¯”**

**ä¼˜å…ˆçº§çˆ¬å‡è§£æå™¨**:
```typescript
function parseExpression(minPrecedence: Precedence): ASTNode {
    let left = parsePrimary();
    while (true) {
        const precedence = getPrecedence(currentToken);
        if (precedence < minPrecedence) break;
        // å¤„ç†æ“ä½œç¬¦...
    }
}
```

**é€†æ³¢å…°è¡¨è¾¾å¼å¤„ç†**:
```typescript
// ä¼ªä»£ç ï¼šå¤„ç†æ“ä½œç¬¦æ ˆ
while (operatorStack.length > 0 && 
       precedence(operatorStack.top()) >= precedence(currentToken)) {
    const op = operatorStack.pop();
    // å¤„ç†æ“ä½œç¬¦...
}
```

#### **ç›¸ä¼¼æ€§åˆ†æè¡¨**
| ç‰¹æ€§ | ä¼˜å…ˆçº§çˆ¬å‡ | é€†æ³¢å…°å¤„ç† |
|------|------------|------------|
| **æ“ä½œç¬¦ä¼˜å…ˆçº§** | é€šè¿‡ `getPrecedence()` æ¯”è¾ƒ | é€šè¿‡ä¼˜å…ˆçº§è¡¨æ¯”è¾ƒ |
| **ç»“åˆæ€§å¤„ç†** | `rightMinPrecedence` å‚æ•° | æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§æ¯”è¾ƒ |
| **å»¶è¿Ÿå¤„ç†** | é‡åˆ°æ›´é«˜ä¼˜å…ˆçº§æ‰å¤„ç† | é‡åˆ°æ›´é«˜ä¼˜å…ˆçº§æ‰å¤„ç† |
| **æ ˆå¼æ€ç»´** | é€’å½’è°ƒç”¨æ ˆæ¨¡æ‹Ÿ | æ˜¾å¼æ“ä½œç¬¦æ ˆ |

#### **ä¸»è¦åŒºåˆ«**
| æ–¹é¢ | ä¼˜å…ˆçº§çˆ¬å‡ | é€†æ³¢å…° |
|------|------------|--------|
| **å®ç°æ–¹å¼** | é€’å½’å‡½æ•° | æ˜¾å¼æ ˆ |
| **å†…å­˜ä½¿ç”¨** | è°ƒç”¨æ ˆ | æ“ä½œç¬¦æ ˆ+æ“ä½œæ•°æ ˆ |
| **ä»£ç ç»“æ„** | å•ä¸€å‡½æ•° | å¤šä¸ªå‡½æ•° |
| **æ‰©å±•æ€§** | æ˜“äºæ·»åŠ æ–°æ“ä½œç¬¦ | éœ€è¦ä¿®æ”¹æ ˆå¤„ç†é€»è¾‘ |

**ç»“è®º**: ä¼˜å…ˆçº§çˆ¬å‡è§£æå™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**é€’å½’ç‰ˆæœ¬çš„é€†æ³¢å…°è¡¨è¾¾å¼å¤„ç†ç®—æ³•**ï¼Œä¸¤è€…éƒ½éµå¾ª"ä¼˜å…ˆçº§é©±åŠ¨"çš„æ ¸å¿ƒç®—æ³•æ€æƒ³ã€‚

### 6. ASTæ ‘ç»“æ„åˆ†æç¤ºä¾‹

#### **å¤æ‚è¡¨è¾¾å¼**: `1+2*3**2**2`

##### **ASTæ ‘ç»“æ„å›¾**
```
                    BinaryOp(+)
                   /           \
            Number(1)          BinaryOp(*)
                               /           \
                        Number(2)          BinaryOp(**)
                                           /           \
                                    Number(3)          BinaryOp(**)
                                                       /           \
                                                Number(2)          Number(2)
```

##### **è¯¦ç»†èŠ‚ç‚¹åˆ†æ**
1. **æ ¹èŠ‚ç‚¹ - åŠ æ³•è¿ç®—**: `1 + (2*3**2**2)`
2. **å³å­æ ‘ - ä¹˜æ³•è¿ç®—**: `2 * (3**2**2)`
3. **å³å­æ ‘çš„å³å­æ ‘ - ç¬¬ä¸€ä¸ªæŒ‡æ•°è¿ç®—**: `3 ** (2**2)`
4. **å³å­æ ‘çš„å³å­æ ‘çš„å³å­æ ‘ - ç¬¬äºŒä¸ªæŒ‡æ•°è¿ç®—**: `2 ** 2`

##### **è®¡ç®—è¿‡ç¨‹**
```
1. è®¡ç®— 2**2 = 4
2. è®¡ç®— 3**4 = 81  
3. è®¡ç®— 2*81 = 162
4. è®¡ç®— 1+162 = 163
```

##### **ä¼˜å…ˆçº§å’Œç»“åˆæ€§ä½“ç°**
- **ä¼˜å…ˆçº§**: `**` > `*` > `+`
- **å³ç»“åˆæ€§**: `3**2**2` è§£æä¸º `3**(2**2)`ï¼Œä¸æ˜¯ `(3**2)**2`
- **æ ‘ç»“æ„**: ç”±äºå³ç»“åˆæ€§ï¼ŒæŒ‡æ•°è¿ç®—å½¢æˆäº†å³å€¾æ–œçš„æ ‘ç»“æ„

##### **å®Œæ•´JSONç»“æ„**
```json
{
  "type": "BinaryOp",
  "operator": "+",
  "left": {"type": "Number", "value": 1},
  "right": {
    "type": "BinaryOp",
    "operator": "*",
    "left": {"type": "Number", "value": 2},
    "right": {
      "type": "BinaryOp",
      "operator": "**",
      "left": {"type": "Number", "value": 3},
      "right": {
        "type": "BinaryOp",
        "operator": "**",
        "left": {"type": "Number", "value": 2},
        "right": {"type": "Number", "value": 2}
      }
    }
  }
}
```

### AST èŠ‚ç‚¹ç±»å‹
```typescript
interface NumberNode {
    type: 'Number';
    value: number;
}

interface BinaryOpNode {
    type: 'BinaryOp';
    operator: string;
    left: ASTNode;
    right: ASTNode;
}
```

## ğŸ” è°ƒè¯•åŠŸèƒ½

### å¯ç”¨è°ƒè¯•æ¨¡å¼
```typescript
const DEBUG = true;  // åœ¨ index.ts ä¸­è®¾ç½®
```

### è°ƒè¯•è¾“å‡ºç¤ºä¾‹
```
[Debug] TOKEN:NUMBER
[Debug] EVAL:Expr
[Debug] EVAL:AddSubExpr
[Debug] EVAL:MulDivExpr
[Debug] EVAL:PrimaryExpr
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **[è¡¨è¾¾å¼æ‰§è¡Œæµç¨‹åˆ†æ](docs/expression-analysis.md)**ï¼šè¯¦ç»†åˆ†æ `1 + 2 * (3 + 1) - 5` çš„æ‰§è¡Œè¿‡ç¨‹
- **[è¿ç®—ç¬¦ç»“åˆæ€§åˆ†æ](docs/operator-associativity.md)**ï¼šå·¦ç»“åˆ vs å³ç»“åˆçš„å®ç°åŸç†
- **[ä¼˜å…ˆçº§çˆ¬å‡ç®—æ³•åˆ†æ](docs/precedence-climbing-analysis.md)**ï¼šè¯¦ç»†åˆ†æ `1+2*3**2**2+100` çš„æ‰§è¡Œè¿‡ç¨‹
- **ğŸ¯ [ä¼˜å…ˆçº§çˆ¬å¡æ ˆå¼åˆ†æ](docs/precedence-climbing-stack-analysis.md)**ï¼šå•è°ƒæ ˆ + æ“ä½œæ•°æ ˆçš„æ•°æ®ç»“æ„æœ¬è´¨åˆ†æ

## ğŸ—ï¸ é¡¹ç›®æ¶æ„è®¾è®¡

### æ–‡ä»¶å¤¹ç»„ç»‡åŸåˆ™
é¡¹ç›®é‡‡ç”¨**æŒ‰è§£ææ–¹æ³•åˆ†ç±»**çš„ç»„ç»‡æ–¹å¼ï¼š

```
bnf/                    # BNFæ–¹æ³•ï¼ˆé€’å½’ä¸‹é™ï¼‰
â”œâ”€â”€ index.ts           # é›†æˆç‰ˆæœ¬ï¼šè§£æ+æ±‚å€¼
â””â”€â”€ separated.ts       # åˆ†ç¦»ç‰ˆæœ¬ï¼šè§£æ+AST+ä»£ç ç”Ÿæˆ

precedence-climbing/    # ä¼˜å…ˆçº§çˆ¬å‡æ–¹æ³•
â”œâ”€â”€ index.ts           # é›†æˆç‰ˆæœ¬ï¼šè§£æ+æ±‚å€¼  
â””â”€â”€ separated.ts       # åˆ†ç¦»ç‰ˆæœ¬ï¼šè§£æ+AST+ä»£ç ç”Ÿæˆ
```

### è®¾è®¡ä¼˜åŠ¿
1. **æ¸…æ™°çš„æ–¹æ³•å¯¹æ¯”**ï¼šæ¯ç§è§£ææ–¹æ³•éƒ½æœ‰ç‹¬ç«‹çš„æ–‡ä»¶å¤¹
2. **ç»Ÿä¸€çš„å‘½åè§„èŒƒ**ï¼šæ¯ä¸ªæ–‡ä»¶å¤¹éƒ½åŒ…å« `index.ts`ï¼ˆé›†æˆï¼‰å’Œ `separated.ts`ï¼ˆåˆ†ç¦»ï¼‰
3. **ä¾¿äºå­¦ä¹ ç†è§£**ï¼šå¯ä»¥è½»æ¾å¯¹æ¯”ä¸åŒè§£æç®—æ³•çš„å®ç°
4. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

### ç‰ˆæœ¬é€‰æ‹©æŒ‡å—
- **å­¦ä¹ é€’å½’ä¸‹é™**ï¼šä½¿ç”¨ `bnf/` æ–‡ä»¶å¤¹
- **å­¦ä¹ ä¼˜å…ˆçº§çˆ¬å‡**ï¼šä½¿ç”¨ `precedence-climbing/` æ–‡ä»¶å¤¹
- **éœ€è¦ä»£ç ç”Ÿæˆ**ï¼šä½¿ç”¨ `separated.ts` ç‰ˆæœ¬
- **ç®€å•æ±‚å€¼**ï¼šä½¿ç”¨ `index.ts` ç‰ˆæœ¬

## ğŸ¯ å­¦ä¹ ä»·å€¼

è¿™ä¸ªé¡¹ç›®æ˜¯å­¦ä¹ ç¼–è¯‘åŸç†çš„ç»ä½³ä¾‹å­ï¼Œæ¶µç›–äº†ï¼š

1. **è¯æ³•åˆ†æ**ï¼šToken è¯†åˆ«å’Œåˆ†ç±»
2. **è¯­æ³•åˆ†æ**ï¼šé€’å½’ä¸‹é™è§£æå™¨ vs ä¼˜å…ˆçº§çˆ¬å‡è§£æå™¨
3. **AST æ„å»º**ï¼šæŠ½è±¡è¯­æ³•æ ‘è®¾è®¡
4. **ä»£ç ç”Ÿæˆ**ï¼šæ±‡ç¼–ä»£ç ç”Ÿæˆ
5. **è¿ç®—ç¬¦ä¼˜å…ˆçº§**ï¼šè¯­æ³•è§„åˆ™è®¾è®¡
6. **ç»“åˆæ€§å¤„ç†**ï¼šå·¦ç»“åˆ vs å³ç»“åˆ
7. **ç®—æ³•å¯¹æ¯”**ï¼šä¸åŒè§£æç®—æ³•çš„å®ç°å’Œæ•ˆæœå¯¹æ¯”
8. **å…³æ³¨ç‚¹åˆ†ç¦»**ï¼šè§£æã€æ±‚å€¼ã€ä»£ç ç”Ÿæˆçš„æ¨¡å—åŒ–è®¾è®¡
9. **æµ‹è¯•é©±åŠ¨å¼€å‘**ï¼šå®Œæ•´çš„æµ‹è¯•æ¡†æ¶å’Œè‡ªåŠ¨åŒ–éªŒè¯
10. **é”™è¯¯å¤„ç†**ï¼šå¼‚å¸¸æƒ…å†µçš„å¤„ç†å’ŒéªŒè¯

## ğŸš€ æ‰©å±•æ–¹å‘

- æ·»åŠ æ›´å¤šè¿ç®—ç¬¦ï¼ˆä½è¿ç®—ã€é€»è¾‘è¿ç®—ï¼‰
- æ”¯æŒå˜é‡å’Œèµ‹å€¼
- æ·»åŠ å‡½æ•°è°ƒç”¨
- ä¼˜åŒ–æ±‡ç¼–ä»£ç ç”Ÿæˆ
- æ”¯æŒæ›´å¤šæ•°æ®ç±»å‹ï¼ˆæµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ï¼‰

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**Happy Coding! ğŸ‰**
