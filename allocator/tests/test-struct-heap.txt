// 堆分配结构体测试
// 测试功能：
// 1. 使用 alloc 分配内存
// 2. 指针操作
// 3. 使用 free 释放内存

int main() {
  // 分配 2 个字节（模拟 struct Point { int x; int y; }）
  // 注意：目前编译器还没实现 sizeof(Point)，所以手动指定大小
  int size = 2;
  
  // alloc 返回指针（地址）
  // 我们使用 int* 类型来模拟 struct Point*
  int* p = alloc(size);
  
  // 写入数据：p->x = 10, p->y = 20
  // p 指向 x，p+1 指向 y
  // 注意：目前编译器对指针运算的支持可能有限，我们使用直接地址操作
  
  // *p = 10
  *p = 10;
  
  // *(p+1) = 20
  // 由于没有指针加法，我们需要手动计算地址
  // 暂时不支持指针加法，我们先只测试第一个字段
  
  // 读取数据
  int val = *p;
  
  // 释放内存
  free(p);
  
  return val;
}
