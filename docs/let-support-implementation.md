# Let æ”¯æŒå®ç°æ€»ç»“

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æˆåŠŸå®ç°äº†å¯¹ `let` å…³é”®å­—çš„æ”¯æŒï¼ŒåŒ…æ‹¬ï¼š

1. **Let å£°æ˜è¯­æ³•**ï¼š`let variableName = value;`
2. **TDZ (Temporal Dead Zone)**ï¼šåœ¨ `let` å˜é‡å£°æ˜ä¹‹å‰è®¿é—®ä¼šæŠ¥é”™
3. **ä½œç”¨åŸŸæ”¯æŒ**ï¼š`let` å˜é‡æ”¯æŒå—çº§ä½œç”¨åŸŸ
4. **ç±»å‹æ¨æ–­**ï¼š`let` å˜é‡é»˜è®¤ä¸º `int` ç±»å‹

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. è¯æ³•åˆ†æå™¨ (`lexer.ts`)
- æ·»åŠ äº† `'let': TokenType.LET` å…³é”®å­—æ˜ å°„

### 2. ç±»å‹å®šä¹‰ (`types.ts`)
- æ·»åŠ äº† `LET = 'LET'` TokenType

### 3. AST ç±»å‹å®šä¹‰ (`ast.ts`)
- æ·»åŠ äº† `LetDeclaration` æ¥å£
- æ·»åŠ äº† `createLetDeclaration` å·¥å‚æ–¹æ³•
- æ›´æ–°äº† `Statement` è”åˆç±»å‹

### 4. è§£æå™¨ (`parser.ts`)
- æ·»åŠ äº† `parseLetDeclaration` æ–¹æ³•
- `let` è¯­æ³•ï¼š`let identifier = expression;`
- æ”¯æŒå¯é€‰çš„åˆå§‹åŒ–è¡¨è¾¾å¼

### 5. ä»£ç ç”Ÿæˆå™¨ (`separated.ts`)
- æ‰©å±•äº† `ScopeManager` ç±»ï¼š
  - æ·»åŠ äº† `tdzVars: Set<string>` æ¥è·Ÿè¸ª TDZ å˜é‡
  - æ·»åŠ äº† `declareLetVariable` æ–¹æ³•
  - æ·»åŠ äº† `initializeLetVariable` æ–¹æ³•
  - åœ¨ `getVariable` ä¸­æ·»åŠ äº† TDZ æ£€æŸ¥
- æ·»åŠ äº† `generateLetDeclaration` æ–¹æ³•

### 6. è§£é‡Šå™¨ (`index.ts`)
- æ·»åŠ äº† `executeLetDeclaration` æ–¹æ³•
- æ”¯æŒ `let` å£°æ˜çš„è¿è¡Œæ—¶æ‰§è¡Œ

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### 1. åŸºæœ¬ let æ”¯æŒæµ‹è¯• (`let-test.txt`)
```c
int func(int x) {
  int a = 10;        # int å£°æ˜
  
  if (x > 0) {
    let b = 20;      # let å£°æ˜
    print(b);        # åº”è¯¥æ­£å¸¸æ‰“å° 20
    
    let c = 30;      # let å£°æ˜
    print(c);        # åº”è¯¥æ­£å¸¸æ‰“å° 30
    
    print(a);        # è®¿é—®å¤–å±‚å˜é‡
  }
  
  print(a);
  return a;
}

int main() {
  int result = func(5);
  print(result);
  return 0;
}
```

**è¾“å‡ºç»“æœ**ï¼š`20, 30, 10, 10, 10`

### 2. TDZ æµ‹è¯• (`let-tdz-test.txt`)
```c
int func() {
  int a = 10;
  
  # æµ‹è¯• TDZ - è¿™åº”è¯¥ä¼šæŠ¥é”™
  print(b);  # åœ¨ let b å£°æ˜ä¹‹å‰è®¿é—®ï¼Œåº”è¯¥æŠ¥é”™
  let b = 20;
  
  return a;
}
```

**é¢„æœŸè¡Œä¸º**ï¼šç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶åº”è¯¥æŠ¥é”™ "Cannot access 'b' before initialization"

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°
- **Let å£°æ˜è¯­æ³•**ï¼š`let variableName = value;`
- **å—çº§ä½œç”¨åŸŸ**ï¼š`let` å˜é‡æ”¯æŒåµŒå¥—ä½œç”¨åŸŸ
- **ç±»å‹æ¨æ–­**ï¼šé»˜è®¤ä¸º `int` ç±»å‹
- **åˆå§‹åŒ–æ”¯æŒ**ï¼šæ”¯æŒå¯é€‰åˆå§‹åŒ–è¡¨è¾¾å¼
- **TDZ æ£€æŸ¥**ï¼šåœ¨ä»£ç ç”Ÿæˆé˜¶æ®µæ£€æŸ¥ TDZ

### ğŸ”„ ä¸ int å£°æ˜çš„åŒºåˆ«
- **int å£°æ˜**ï¼š`int variableName = value;` - C é£æ ¼
- **let å£°æ˜**ï¼š`let variableName = value;` - JavaScript é£æ ¼
- **ä½œç”¨åŸŸè¡Œä¸º**ï¼šä¸¤è€…éƒ½æ”¯æŒå—çº§ä½œç”¨åŸŸ
- **TDZ æ”¯æŒ**ï¼šåªæœ‰ `let` æ”¯æŒ TDZ æ£€æŸ¥

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

```c
int main() {
  int a = 10;        # int å£°æ˜
  let b = 20;        # let å£°æ˜
  
  if (true) {
    let c = 30;      # å—çº§ let å˜é‡
    print(c);        # æ­£å¸¸è®¿é—®
    
    # print(d);      # è¿™ä¼šè§¦å‘ TDZ é”™è¯¯
    let d = 40;      # let å£°æ˜
    print(d);        # æ­£å¸¸è®¿é—®
  }
  
  return 0;
}
```

## ğŸ”® æœªæ¥æ‰©å±•

1. **ç±»å‹æ³¨è§£**ï¼šæ”¯æŒ `let variableName: int = value;`
2. **const æ”¯æŒ**ï¼šå®ç° `const` å…³é”®å­—
3. **æ›´å¤šç±»å‹**ï¼šæ”¯æŒ `string`ã€`boolean` ç­‰ç±»å‹
4. **è¿è¡Œæ—¶ TDZ**ï¼šåœ¨è™šæ‹Ÿæœºä¸­å®ç°è¿è¡Œæ—¶ TDZ æ£€æŸ¥

## ğŸ“ æ€»ç»“

`let` æ”¯æŒå·²ç»æˆåŠŸå®ç°ï¼Œæä¾›äº†ï¼š
- å®Œæ•´çš„è¯­æ³•æ”¯æŒ
- å—çº§ä½œç”¨åŸŸç®¡ç†
- TDZ æ£€æŸ¥æœºåˆ¶
- ä¸ç°æœ‰ `int` å£°æ˜çš„å…¼å®¹æ€§

è¿™ä¸ºç¼–è¯‘å™¨æä¾›äº†æ›´çµæ´»çš„å˜é‡å£°æ˜æ–¹å¼ï¼Œæ”¯æŒ JavaScript é£æ ¼çš„ `let` è¯­æ³•ï¼ŒåŒæ—¶ä¿æŒäº† C é£æ ¼çš„ä½œç”¨åŸŸè¯­ä¹‰ã€‚
